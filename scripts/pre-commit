#!/bin/sh
# Fast pre-commit hook - only check changed files

echo "⚡ Quick pre-commit checks..."

# Get only staged TypeScript/JavaScript files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|tsx|js|jsx)$' || true)

if [ -z "$STAGED_FILES" ]; then
    echo "✅ No code files changed"
    exit 0
fi

echo "� Checking $(echo "$STAGED_FILES" | wc -l) changed files..."

# Quick ESLint check on only changed files
if ! npx eslint --cache $STAGED_FILES; then
    echo "❌ ESLint failed. Run 'pnpm lint:fix' to auto-fix"
    exit 1
fi

echo "✅ Pre-commit checks passed!"
